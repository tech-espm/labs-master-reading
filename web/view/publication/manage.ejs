<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="pt-br">

<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>Leitura de Mestre</title>

    <meta property="og:locale" content="pt_BR" />
    <meta property="og:type" content="website" />
    <meta property="og:url" content="https://academico.espm.br/leitura-de-mestre" />
    <meta property="og:title" content="Leitura de Mestre ESPM" />
    <meta property="og:site_name" content="Leitura de Mestre ESPM" />
    <meta property="og:description" content="Leitura de Mestre ESPM" />
    <meta property="og:image" content="https://academico.espm.br/leaderboard/imagens/loginbg.jpg" />
    <meta property="og:image:type" content="image/jpeg" />
    <meta property="og:image:width" content="1920" />
    <meta property="og:image:height" content="1080" />

    <meta name="author" content="ESPM" />
    <meta name="description" content="Leitura de Mestre ESPM" />
    <meta name="keywords" content="leitura, mestre, livro, ESPM, Tech" />

    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black" />
    <meta name="apple-mobile-web-app-title" content="Leitura de Mestre ESPM" />
    <!--
	https://w3c.github.io/manifest/#icon-masks
	https://github.com/w3c/manifest/issues/555
-->
    <meta name="msapplication-config" content="/favicons/browserconfig.xml" />
    <meta name="theme-color" content="#222222" />

    <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet" />
    <link rel="stylesheet" href="/lib/bootstrap/css/bootstrap-1.0.27.min.css" />
    <link rel="stylesheet" href="/lib/jquery-ui/css/jquery-ui-1.0.0.min.css" />
    <link rel="stylesheet" href="/lib/metis-menu/css/metis-menu-1.0.0.min.css" />
    <link rel="stylesheet" href="/lib/bootstrap-datepicker/css/bootstrap-datepicker-1.0.1.min.css" />
    <link rel="stylesheet" href="/lib/font-awesome/css/font-awesome-1.0.2.min.css" />
    <link rel="stylesheet" href="/lib/data-tables/css/data-tables.bootstrap-1.0.7.css" />
    <link rel="stylesheet" href="/assets/styles/admin.css" />

    <script type="text/javascript" src="/lib/jquery/js/jquery-1.0.1.min.js"></script>
    <script type="text/javascript" src="/lib/metis-menu/js/metis-menu-1.0.1.min.js"></script>
    <script type="text/javascript" src="/js/main.js"></script>
    <script type="text/javascript">
        //<![CDATA[
        "use strict";
        Notification.pathBase = "/";
        Notification.imagePath = "imagens";
	//]]>
    </script>


    <style type="text/css">
        .link {
            word-wrap: break-word;
            font-weight: bold;
            font-family: Consolas, monospace;
        }

        li {
            list-style-position: inside;
        }

        hr {
            margin: 50px 0;
        }
    </style>

</head>

<body>

    <div id="sidebar-fake-bg" class="sidebar-fake-bg"></div>
    <nav class="navbar navbar-default navbar-static-top nav-shadow " role="navigation" style="margin-bottom: 0">
        <div class="navbar-header">
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Alterar menu</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="/"><img alt="Logo" src="/assets/images/logo-cabecalho.png" /></a>
        </div>

        <ul class="nav navbar-top-links navbar-right">
            <li class="dropdown">
                <a class="dropdown-toggle" data-toggle="dropdown" href="#" aria-expanded="false">
                    <img class="profile-img" alt="Perfil" src="/assets/images/user.png" width="40" height="40" />ADMIN <i
                        class="fa fa-caret-down"></i>
                </a>
                <ul class="dropdown-menu dropdown-user">

                    <li>
                        <a href="/"><i class="fa fa-sign-out fa-fw"></i>Sair</a>
                    </li>
                </ul>
            </li>
        </ul>

        <div id="sidebar" class="sidebar" role="navigation">
            <div id="navbar-collapse" class="sidebar-nav navbar-collapse collapse">
                <ul class="nav" id="side-menu">
                    <li class="hidden-xs"><button id="btn-sidebar" type="button"
                            class="btn btn-outline btn-default btn-sidebar" title="Ocultar Menu"><i
                                class="fa fa-bars fa-fw fa-nomargin"></i></button></li>
                    <li class="sidebar-spacer"></li>

                    <li>
                        <!-- <a href="/" class="active"><i class="fa fa-dashboard fa-fw"></i>Dashboard</a> -->
                        <a href="/admin"><i class="fa fa-dashboard fa-fw"></i>Dashboard</a>
                    </li>

                    <li class="sidebar-spacer"></li>

                    <li>
                        <a href="#"><i class="fa fa-file-text-o fa-fw"></i>Publicações<span class="fa arrow"></span></a>
                        <ul class="nav nav-second-level collapse">

                            <li>
                                <a href="/publicacao/criar"><i class="fa fa-plus fa-fw"></i>Criar</a>
                            </li>

                            <li>
                                <a href="/publicacao/gerenciar"><i class="fa fa-tasks fa-fw"></i>Gerenciar</a>
                            </li>

                        </ul>
                    </li>

                    <li class="sidebar-spacer"></li>

                </ul>
            </div>
        </div>
    </nav>


    <div id="page-wrapper">
        <div class="row">
            <div class="col-lg-12">
                <h1 class="page-header">Leitura de Mestre</h1>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12">
                <div class="panel panel-default">
                    <div class="panel-body dataTable_wrapper">
                        <table class="table table-striped table-hover" id="tabela"></table>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="modal fade" tabindex="-1" role="dialog" id="modalExcluir">
            <div class="modal-dialog" role="document">
                <div class="modal-content">
                    <div class="modal-header">
                        <button type="button" class="close" data-dismiss="modal" aria-label="Fechar"><span aria-hidden="true">&times;</span></button>
                        <h4 class="modal-title">Oops...</h4>
                    </div>
                    <div class="modal-body">
                        <p>
                            Tem certeza que deseja excluir a recomendação <span id="lblNome"></span>? Esta operação <b class="col-h">NÃO</b> pode ser desfeita!
                        </p>
                    </div>
                    <div class="modal-footer">
                        <button type="button" class="btn btn-danger" onclick="excluir()"><i class="fa fa-check"></i>Excluir</button>
                        <button type="button" class="btn btn-outline btn-default" data-dismiss="modal"><i class="fa fa-times"></i>Cancelar</button>
                    </div>
                </div>
            </div>
        </div>

    </div>

    <script type="text/javascript">
        //<![CDATA[
        "use strict";
    
        var tabela = prepareDataTable("tabela", {
            order: [[1, "asc"]],
            deferRender: true,
            columns: [
                { title: "", "class": "col-min", searchable: false, orderable: false, data: null, render: function (v, type, row) { return "<a target=\"_blank\" title=\"Editar\" href=\"<%- root %>/jogo/alterar?id=" + row.id + "\" class=\"btn btn-outline btn-primary\"><i class=\"fa fa-nomargin fa-edit\"></i></a> <a target=\"_blank\" title=\"Leaderboard\" href=\"<%- root %>/jogo/" + row.id + "\" class=\"btn btn-outline btn-default\"><i class=\"fa fa-nomargin fa-trophy\"></i></a> <button title=\"Excluir\" type=\"button\" data-excluir=\"1\" class=\"btn btn-outline btn-danger\"><i class=\"fa fa-nomargin fa-times\"></i></button>"; } },
                //{ title: "Id", "class": "col-min", "type": "num", data: "id" },
                { title: "Mestre", render: encode, data: "master" },
                { title: "Descrição", render: encode, data: "description" },
                { title: "Imagem", "class": "text-center", searchable: false, orderable: false, data: null, render: function (v, type, row) { return "<a target=\"_blank\" title=\"Imagem do jogo\" href=\"<%- root %>/screenshots/" + row.id + ".jpg?" + row.versao + "\" class=\"btn btn-outline btn-default\"><i class=\"fa fa-nomargin fa-image\"></i></a>"; } },
                { title: "Criação", "class": "col-min", "type": "customdateint", data: "data_cadastro" }
            ],
            // data:  ,
            export: { title: "Recomendacoes" }
        });
    
        var trClicada;
    
        $("#tabela").on("click", "tbody button", function () {
            if (JsonWebApi.active)
                return;
    
            var jogo = tabela.row(trClicada = this.parentNode.parentNode).data();
    
            if (this.getAttribute("data-excluir")) {
                $("#lblNome").text(jogo.nome);
    
                $("#modalExcluir").modal({
                    backdrop: "static",
                    keyboard: true
                });
            }
        });
    
        function excluir() {
            if (JsonWebApi.active || !trClicada)
                return;
    
            $("#modalExcluir").modal("hide");
    
            var jogo = tabela.row(trClicada).data();
    
            Notification.wait();
    
            JsonWebApi.get("<%- root %>/api/jogo/excluir", function (response) {
                if (response.success) {
                    Notification.success("Recomendação excluída com sucesso! " + emoji.happy);
                    tabela.row(trClicada).remove().draw();
                } else {
                    Notification.error(response.value, true);
                }
                trClicada = null;
            }, "id", jogo.id);
        }
    
        //]]>
    </script>

    <script type="text/javascript" src="/lib/jquery-ui/js/jquery-ui-1.0.0.min.js"></script>
    <script type="text/javascript" src="/lib/jquery-mask/js/jquery-mask-1.0.0.min.js"></script>
    <script type="text/javascript" src="/lib/jquery-validate/js/jquery-validate-1.0.3.min.js"></script>
    <script type="text/javascript" src="/lib/jquery-validate/js/messages_pt_BR.min.js"></script>
    <script type="text/javascript" src="/lib/bootstrap/js/bootstrap-1.0.1.min.js"></script>
    <script type="text/javascript" src="/lib/bootstrap-datepicker/js/bootstrap-datepicker-1.0.6.min.js"></script>
    <script type="text/javascript" src="/lib/data-tables/js/data-tables-1.0.15.min.js"></script>
    <script type="text/javascript" src="/js/admin.js"></script>


</body>

</html>